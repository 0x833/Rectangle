# مستطيل

[![Build](https://github.com/rxhanson/Rectangle/actions/workflows/build.yml/badge.svg)](https://github.com/rxhanson/Rectangle/actions/workflows/build.yml)

مستطيل هو تطبيق لإدارة النوافذ مستند إلى Spectacle، وهو مكتوب بلغة Swift.

![Screenshot](https://user-images.githubusercontent.com/13651296/183785536-a67a2e2a-7c55-4c19-9bf8-482e734b1632.png)

## متطلبات النظام

يدعم مستطيل macOS v10.13+.

## التثبيت

يمكنك تنزيل أحدث ملف dmg من <https://rectangleapp.com> أو صفحة [الإصدارات](https://github.com/rxhanson/Rectangle/releases).

أو يمكنك تثبيته باستخدام brew cask:

```bash
brew install --cask rectangle
```

## كيفية الاستخدام

الاختصارات لوحة المفاتيح مفهومة بنفسها، ولكن يمكن أن تحتاج إلى شرح للمناطق التي يمكن لـ Rectangle الانطباع عليها إذا لم تكن قد استخدمتها على نظام Windows أو تطبيقات إدارة النوافذ الأخرى.

قم بسحب نافذة إلى حافة الشاشة. عندما يصل مؤشر الماوس إلى حافة الشاشة، ستظهر نقطة تحتاج Rectangle إلى تغيير حجم ونقل النافذة إليها عندما يتم النقر على الماوس.

| المنطقة المعترضة                              | الإجراء الناتج                |
|--------------------------------------------|----------------------------------|
| الحافة اليسرى أو اليمنى                               | النصف الأيسر أو الأيمن               |
| الجزء العلوي                                | التكبير الكامل                      |
| الزوايا                                        | الربع في الزاوية المعنية               |
| الحافة اليسرى أو اليمنى، أعلى أو أسفل زاوية معينة   | النصف العلوي أو السفلي                |
| الجزء السفلي الأيسر أو المركز أو الأيمن             | الثلث المعني                          |
| الجزء السفلي الأيسر أو الأيمن ثم سحبه إلى الجزء السفلي المركز | الثلثين الأول والأخير، على التوالي |

### تجاهل تطبيق

1. حدد التطبيق الذي ترغب في تجاهله (اجعل نافذة من هذا التطبيق في الواجهة).
1. افتح قائمة مستطيل وحدد "تجاهل التطبيق".

## تنفيذ إجراء عبر رابط URL

افتح رابط URL `rectangle://execute-action?name=[name]`. لا تقم بتفعيل Rectangle.

القيم المتاحة للعنصر `[name]`: `left-half`، `right-half`، `center-half`، `top-half`، `bottom-half`، `top-left`، `top-right`، `bottom-left`، `bottom-right`، `first-third`، `center-third`، `last-third`، `first-two-thirds`، `last-two-thirds`، `maximize`، `almost-maximize`، `maximize-height`، `smaller`، `larger`، `center`، `restore`، `next-display`، `previous-display`، `move-left`، `move-right`، `move-up`، `move-down`، `first-fourth`، `second-fourth`، `third-fourth`، `last-fourth`، `first-three-fourths`، `last-three-fourths`، `top-left-sixth`، `top-center-sixth`، `top-right-sixth`، `bottom-left-sixth`، `bottom-center-sixth`، `bottom-right-sixth`، `specified`، `reverse-all`، `top-left-ninth`، `top-center-ninth`، `top-right-ninth`، `middle-left-ninth`، `middle-center-ninth`، `middle-right-ninth`، `bottom-left-ninth`، `bottom-center-ninth`، `bottom-right-ninth`، `top-left-third`، `top-right-third`، `bottom-left-third`، `bottom-right-third`، `top-left-eighth`، `top-center-left-eighth`، `top-center-right-eighth`، `top-right-eighth`، `bottom-left-eighth`، `bottom-center-left-eighth`، `bottom-center-right-eighth`، `bottom-right-eighth`، `tile-all`، `cascade-all`

مثال، من خلال الشل: `open -g "rectangle://execute-action?name=left-half"`

## أوامر التحكم بالمحطة للتفضيلات المخفية

انظر إلى [TerminalCommands.md](TerminalCommands.md)

## الاختلافات مع Spectacle

* يستخدم مستطيل [MASShortcut](https://github.com/shpakovski/MASShortcut) لتسجيل اختصارات لوحة المفاتيح. استخدم Spectacle مُسجِّل اختصاره الخاص.
* يحتوي مستطيل على إجراءات نافذة إضافية: نقل النوافذ إلى كل حافة دون تغيير الحجم، التكبير فقط

 لارتفاع النافذة، التكبير الشبه كامل للنافذة.
* تم استبدال الأجزاء الثلثة التالية/السابقة للشاشة بالثلث الأول والثلثين الأولين والثلث المركز والثلثين الأخيرين والثلث الأخير. يؤخذ في الاعتبار اتجاه الشاشة، حيث يكون الثلث الأول على اليسار في الشاشة الأفقية والثلث العلوي في الشاشة الرأسية.
  * يمكنك لكن تقليد دورة الثلث من Spectacle باستخدام إجراءات الثلث الأول والثلث الأخير. إذا قمت بتنفيذ إجراء الثلث الأول بشكل متكرر، سيتم الانتقال بين الأثلاث (الأول والمركز والأخير) والعكس مع الثلث الأخير.
* يوجد خيار للسماح للنوافذ بالانطباع عند سحبها إلى حواف/الزوايا للشاشة. يمكن تعطيل هذا الخيار.

## المشاكل الشائعة المعروفة

### مستطيل لا يحتوي على القدرة على التنقل بين سطحي المكتب/الفضاء

لم تقم Apple بإصدار API عام لـ Spaces. يستخدم تطبيقات أخرى تقوم بنقل النوافذ بين الفضاءات طرقًا غير مدعومة أو غير مرغوب فيها لتحقيق هذا الأمر. إذا قررت Apple إصدار API عام لذلك، سأقوم بإضافته.

### تغيير حجم النوافذ غير دقيق بشكل طفيف لـ iTerm2

بشكل افتراضي، سيقوم iTerm2 بتغيير الحجم بزيادات من عرض الأحرف. قد يكون هناك إعداد داخل iTerm2 لتعطيل ذلك، ولكن يمكنك تغييره باستخدام الأمر التالي.

```bash
defaults write com.googlecode.iterm2 DisableWindowSizeSnap -integer 1
```

### يبدو أن مستطيل يتسبب في تجمد مركز الإعلام

يبدو أن هذا يؤثر فقط على عدد قليل من المستخدمين. لمنع ذلك من الحدوث، قم بإلغاء تحديد الخيار "Snap windows by dragging".
انظر المشكلة [317](https://github.com/rxhanson/Rectangle/issues/317).

### إصلاح المشاكل

إذا لم تعمل النوافذ بالحجم المتوقع أو التحرك كما تتوقع، فإن هناك خطوات أولية لمعرفة السبب. يُعد معظم المشكلات من هذا النوع ناتجة عن تطبيقات أخرى.

1. تأكد من تحديث macOS إلى أحدث إصدار، إذا كان ذلك ممكنًا.
1. أعد تشغيل جهاز الكمبيوتر.
1. تأكد من عدم تشغيل تطبيقات أخرى لإدارة النوافذ.
1. تأكد من أن التطبيق الذي لا تكون نوافذه تصرف بشكل صحيح ليس لديه اختصارات لوحة مفاتيح تتعارض معها.
1. حاول استخدام عناصر القائمة لتنفيذ إجراء على النوافذ أو تغيير اختصار لوحة المفاتيح إلى شيء مختلف لكي نتمكن من معرفة ما إذا كانت هناك مشكلة مع اختصار لوحة المفاتيح أم لا.
1. قم بتمكين تسجيل الأخطاء التصحيحي، حسب التعليمات الموجودة في القسم التالي.
1. تسجيل الأخطاء التصحيحي بسيط. إذا كانت المستطيل الحسابي الخاص بك والمستطيل الناتج متطابقين، فمن المحتمل أن يكون هناك تطبيقًا آخر يسبب المشاكل. احفظ سجلاتك إذا لزم الأمر لتعليقها على مشكلة إذا قمت بإنشاء مشكلة.

1. إذا كنت تشتبه في وجود تطبيق آخر يسبب مشكلة، قم بإنشاء مستخدم macOS جديد وتسجيل الدخول به.

## ع

رض سجلات التصحيح

1. اضغط على مفتاح الخيار (الألت) أثناء فتح قائمة مستطيل.
1. حدد عنصر القائمة "View Logging..."، والذي يحل محل عنصر القائمة "About".
1. ستظهر السجلات في النافذة أثناء تنفيذ إجراءات مستطيل.

## استيراد وتصدير التكوين بتنسيق JSON

هناك أزرار للاستيراد والتصدير التكوين كملف JSON في علامة التبويب الخاصة بالإعدادات في نافذة التفضيلات.

عند الإطلاق، سيقوم مستطيل بتحميل ملف تكوين في المسار `~/Library/Application Support/Rectangle/RectangleConfig.json` إذا كان موجودًا وسيعيد تسميته بهذا الاسم مع طابع زمن/تاريخ لكي لا يتم قراءته عند الإطلاقات اللاحقة.

## تخزين التفضيلات

يتم تخزين تكوين مستطيل باستخدام NSUserDefaults، مما يعني أنه يتم تخزينه في المسار التالي:
`~/Library/Preferences/com.knollsoft.Rectangle.plist`
يُرجى ملاحظة أن اختصارات الإصدار 0.41 وما بعدها تُخزن بتنسيق مختلف ولن تعمل في الإصدارات السابقة.

يمكن نسخ ذلك الملف أو نقله إلى أجهزة أخرى.

إذا كنت تستخدم مستطيل الإصدار 0.44 وما بعده، فيمكنك أيضًا استخدام زر الاستيراد/التصدير في نافذة الإعدادات لمشاركة التفضيلات واختصارات لوحة المفاتيح عبر أجهزة مختلفة باستخدام ملف JSON.

## إلغاء التثبيت

يمكن إلغاء تثبيت مستطيل عن طريق نقله إلى سلة المهملات. قبل نقله إلى سلة المهملات، قد ترغب في إلغاء تحديد الخيار لبدء التشغيل لإلغاء تسجيل المشغل، ولكن هذا ليس ضروريًا. يمكنك إزالة معدات مستطيل من جهاز الكمبيوتر الخاص بك باستخدام الأمر التالي في المحطة:

```bash
defaults delete com.knollsoft.Rectangle
```

---

## المساهمة

تُستخدم منطق مستطيل في تطبيق [Multitouch](https://multitouch.app). تم بناء تطبيق [Rectangle Pro](https://rectangleapp.com/pro) بالكامل فوق مستطيل. إذا قمت بالمساهمة برمز أو تعريبات كبيرة تم دمجها في مستطيل، ستحصل على ترخيص مجاني لتطبيق Multitouch أو Rectangle Pro. يمكن للمساهمين في Sparkle أو MASShortcut أو Spectacle أيضًا الحصول على تراخيص Multitouch أو Rectangle Pro مجانية (فقط أرسل لي رسالة مباشرة على [Gitter](https://gitter.im)).

### التعريب

إذا كنت ترغب في المساهمة في التعريب، يتم تخزين جميع الترجمات في Main.strings لكل لغة. إذا كنت ترغب في إضافة تعريب ولكن لا يوجد لغة متوفرة حاليًا ولا تعرف كيفية إنشاء واحدة، قم بإنشاء مشكلة ويمكن إعداد ملف ترجمة.

نرحب بطلبات السحب لإضافة ترجمات جديدة أو تحسينات على الترجمات الحالية.

### تشغيل التطبيق في Xcode (للمطورين)

يستخدم مستطيل [CocoaPods](https://cocoapods.org/) لتثبيت Sparkle و MASShortcut.

1. تأكد من تثبيت CocoaPods وأنه مُحدَّث على جهازك (`sudo gem install cocoapods`).
1. قم بتنفيذ `pod install` في الدليل الجذري للمشروع.
1. افتح ملف xcworkspace الذي تم إنشاؤه (`open Rectangle.xcworkspace`).
